var E=Object.defineProperty,L=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var g=(t,s,e)=>s in t?E(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,f=(t,s)=>{for(var e in s||(s={}))V.call(s,e)&&g(t,e,s[e]);if(w)for(var e of w(s))k.call(s,e)&&g(t,e,s[e]);return t},x=(t,s)=>L(t,N(s));import{I as R,g as H,_ as $}from"./plugin-vue_export-helper.12c35966.js";import{q as S,H as K,J as O,K as y,M as h,u as c,v as l,w as d,y as D,z as U,N as p,Q as r,x as v,A as u,U as _,V as z,X as A,Y as B,Z as C,_ as F,$ as I,a0 as G,a1 as J,a2 as X,G as Y}from"./vendor.98085066.js";const j={class:"p-2"},q={class:"list-disc ml-6"},M={class:"text-sm"},P=r(" ("),Q=r(") "),W=r(" raw data "),Z=r(" | "),ee=r(" timeline "),se=S({setup(t){const s=K(O(R,{},{deep:!1,shallow:!0,writeDefaults:!1})),e=y(()=>Object.entries(s.value).map(([a,o])=>f({sessionId:a,lastDataTime:new Date(o.lastData)},o)).sort((a,o)=>o.lastData-a.lastData));return(n,a)=>{const o=h("RouterLink");return c(),l("div",j,[d("ul",q,[(c(!0),l(D,null,U(p(e),i=>(c(),l("li",null,[r(v(i.sessionId)+" ",1),d("span",M,[P,u(p(z),{time:i.lastDataTime},{default:_(({timeAgo:m})=>[r(v(m),1)]),_:2},1032,["time"]),Q]),u(o,{to:{name:"session.view",params:{sessionId:i.sessionId}}},{default:_(()=>[W]),_:2},1032,["to"]),Z,u(o,{to:{name:"session.timeline",params:{sessionId:i.sessionId}}},{default:_(()=>[ee]),_:2},1032,["to"])]))),256))])])}}});function b(t){return A({spans:te(y(()=>H("spans",p(t))),oe)})}function te(t,s){const e=B([]);function n(a){if(!(a&&a.key!==t.value))try{const o=a?a.newValue:localStorage.getItem(t.value);if(!o){e.value=[];return}e.value=s(o)}catch(o){console.error("Error parsing localstorage",t.value,o)}}return n(),C(window,"storage",a=>setTimeout(()=>n(a),0)),e}function oe(t){const s=JSON.parse(t),e=[];return s.forEach(({resource:n,instrumentationLibrarySpans:a})=>{a.forEach(({instrumentationLibrary:o,spans:i})=>{i.forEach(m=>{e.push(x(f({},m),{instrumentationLibrary:o,resource:n}))})})}),e}const ae={class:"font-mono"},ne=S({props:{sessionId:null},setup(t){const e=b(F(t,"sessionId"));return(n,a)=>(c(),l("div",null,[d("pre",ae,v(p(e).spans),1)]))}}),re={props:{sessionId:String},mounted(){var s=b(this.sessionId).spans.map(o=>({id:o.spanId,content:o.name,start:o.startTimeUnixNano/1e6,end:o.endTimeUnixNano/1e6,group:1})),e={verticalScroll:!0,zoomKey:"shiftKey"},n=new I;n.add({id:1,content:"spans"}),n.add({id:2,content:"events"});var a=new G(this.$refs.container);a.setOptions(e),a.setGroups(n),a.setItems(new I(s))}},ie=r(" Hold SHIFT to zoom "),ce={ref:"container"};function le(t,s,e,n,a,o){return c(),l(D,null,[ie,d("div",ce,null,512)],64)}var de=$(re,[["render",le]]);const ue=[{path:"/",name:"session.list",component:se},{path:"/view/:sessionId",name:"session.view",component:ne,props:!0},{path:"/timeline/:sessionId",name:"session.timeline",component:de,props:!0}];var _e=J({history:X(),routes:ue});const pe={},me={class:"flex flex-col h-screen w-screen overflow-hidden"},fe={class:"h-12 flex-initial flex border-gray-500 border-b"},he=r(" Sessions List "),ve={class:"flex-1 overflow-auto"};function we(t,s){const e=h("router-link"),n=h("router-view");return c(),l("div",me,[d("div",fe,[u(e,{class:"block p-2 bg-transparent hover:bg-gray-100 hover:text-gray-800",to:"/","exact-active-class":"bg-gray-100 text-blue-600 hover:text-blue-600"},{default:_(()=>[he]),_:1})]),d("div",ve,[u(n)])])}var ge=$(pe,[["render",we]]);const T=Y(ge);T.use(_e);T.mount("#app");
