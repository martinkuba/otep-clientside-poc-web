var B=Object.defineProperty;var $=(o,t,e)=>t in o?B(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var i=(o,t,e)=>($(o,typeof t!="symbol"?t+"":t,e),e);import{s as z,_ as j}from"./plugin-vue_export-helper.0377b147.js";import{h as M,t as X,R as D,E as Y,a as q,O as K,d as l,o as P,P as c,b as w,I as x,T as J,c as d,p as Q,e as tt,f as E,g as A,S as R,i as T,j as et,k as h,D as nt,W as rt,l as st,C as ot,B as at,r as it,m as F,n as ct,q as U,s as V,u as N,v as k,F as Z,w as pt,x as ht}from"./vendor.abe7a31d.js";class ut{constructor(t=M(),e,n){i(this,"timestamp");i(this,"traceId");i(this,"spanId");i(this,"resource");i(this,"attributes",{});this.timestamp=X(t)}setAttribute(t,e){this.attributes[t]=e}}class dt{constructor(t,e){i(this,"logRecord");i(this,"instrumentationLibrary");this.logRecord=t,this.instrumentationLibrary=e,this.logRecord=t,this.instrumentationLibrary=e}}class _t{constructor(t,e,n){i(this,"resource");i(this,"instrumentationLibrary");i(this,"provider");this.resource=t,this.instrumentationLibrary=e,this.provider=n}emit(t){const e=new dt(t,this.instrumentationLibrary);this.provider.processors.forEach(n=>{n.emit(e)})}flush(){throw new Error("not implemented")}}const lt=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},L=Symbol.for("io.opentelemetry.js.api.logs"),y=lt,C=class{constructor(){}static getInstance(){return this._instance||(this._instance=new C),this._instance}setGlobalLogEmitterProvider(t){return y[L]?y[L]:(y[L]=t,t)}getLogEmitterProvider(){var t;return(t=y[L])!=null?t:NOOP_LOG_EMITTER_PROVIDER}getLogEmitter(){}};let O=C;i(O,"_instance");const Tt=O.getInstance();class mt{constructor(t={}){i(this,"processors",[]);i(this,"resource");this.resource=t.resource||D.empty(),this.resource=D.default().merge(this.resource)}getLogEmitter(t,e){return new _t(this.resource,this.instrumentationLibrary,this)}addLogProcessor(t){this.processors.push(t)}register(){Tt.setGlobalLogEmitterProvider(this)}}class Et{constructor(t){this.exporter=t}emit(t){this.exporter.export([t])}shutdown(){}forceFlush(){}}class ft{export(t,e){for(const n of t)console.log(this._exportInfo(n));if(e)return e({code:Y.SUCCESS})}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(t){return{traceId:t.logRecord.traceId,spanId:t.logRecord.parentSpanId,timestamp:q(t.logRecord.timestamp),attributes:t.logRecord.attributes}}}class vt extends K{send(t,e,n){if(this._isShutdown){l.debug("Shutdown already started. Cannot send objects");return}const r=this.convert(t);z(r),e()}}var g=(o=>(o.COMPONENT="component",o.DOCUMENT_LOAD="documentLoad",o.DOCUMENT_FETCH="documentFetch",o.RESOURCE_FETCH="resourceFetch",o))(g||{}),b=(o=>(o.FIRST_PAINT="firstPaint",o.FIRST_CONTENTFUL_PAINT="firstContentfulPaint",o))(b||{});const gt=()=>{var e,n;const o={},t=(n=(e=P).getEntriesByType)==null?void 0:n.call(e,"navigation")[0];if(t)Object.values(c).forEach(s=>{if(w(t,s)){const a=t[s];typeof a=="number"&&(o[s]=a)}});else{const s=P.timing;s&&Object.values(c).forEach(p=>{if(w(s,p)){const m=s[p];typeof m=="number"&&(o[p]=m)}})}return o},I={"first-paint":b.FIRST_PAINT,"first-contentful-paint":b.FIRST_CONTENTFUL_PAINT},wt=o=>{var e,n;const t=(n=(e=P).getEntriesByType)==null?void 0:n.call(e,"paint");t&&t.forEach(({name:r,startTime:s})=>{w(I,r)&&o.addEvent(I[r],s)})},St="0.0.0";class Lt extends x{constructor(t={}){super("@opentelemetry/instrumentation-document-load",St,t);i(this,"component","document-load");i(this,"version","1");i(this,"moduleName",this.component)}init(){}_onDocumentLoaded(){window.setTimeout(()=>{this._collectPerformance()})}_addResourcesSpans(t){var n,r;const e=(r=(n=P).getEntriesByType)==null?void 0:r.call(n,"resource");e&&e.forEach(s=>{this._initResourceSpan(s,t)})}_collectPerformance(){const t=Array.from(document.getElementsByTagName("meta")).find(r=>r.getAttribute("name")===J),e=gt(),n=t&&t.content||"";d.with(Q.extract(tt,{traceparent:n}),()=>{const r=this._startSpan(g.DOCUMENT_LOAD,c.FETCH_START,e);!r||(d.with(E.setSpan(d.active(),r),()=>{const s=this._startSpan(g.DOCUMENT_FETCH,c.FETCH_START,e);s&&d.with(E.setSpan(d.active(),s),()=>{A(s,e),this._endSpan(s,c.RESPONSE_END,e)})}),r.setAttribute(R.HTTP_URL,location.href),r.setAttribute(R.HTTP_USER_AGENT,navigator.userAgent),this._addResourcesSpans(r),T(r,c.FETCH_START,e),T(r,c.UNLOAD_EVENT_START,e),T(r,c.UNLOAD_EVENT_END,e),T(r,c.DOM_INTERACTIVE,e),T(r,c.DOM_CONTENT_LOADED_EVENT_START,e),T(r,c.DOM_CONTENT_LOADED_EVENT_END,e),T(r,c.DOM_COMPLETE,e),T(r,c.LOAD_EVENT_START,e),T(r,c.LOAD_EVENT_END,e),wt(r),this._endSpan(r,c.LOAD_EVENT_END,e))})}_endSpan(t,e,n){t&&(w(n,e)?t.end(n[e]):t.end())}_initResourceSpan(t,e){const n=this._startSpan(g.RESOURCE_FETCH,c.FETCH_START,t,e);n&&(n.setAttribute(R.HTTP_URL,t.name),A(n,t),this._endSpan(n,c.RESPONSE_END,t))}_startSpan(t,e,n,r){if(w(n,e)&&typeof n[e]=="number"){const s=this.tracer.startSpan(t,{startTime:n[e]},r?E.setSpan(d.active(),r):void 0);return s.setAttribute(g.COMPONENT,this.component),s}}_waitForPageLoad(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))}enable(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()}disable(){window.removeEventListener("load",this._onDocumentLoaded)}}var v=(o=>(o.COMPONENT="component",o.EVENT_TYPE="event_type",o.TARGET_ELEMENT="target_element",o.TARGET_XPATH="target_xpath",o.HTTP_URL="http.url",o.HTTP_USER_AGENT="http.user_agent",o))(v||{});const yt="OT_ZONE_CONTEXT",Pt="Navigation:",Nt=["click"];function Rt(){return!1}const H="0.0.0";class Ot extends x{constructor(t){super("@opentelemetry/instrumentation-user-interaction",H,t);i(this,"component","user-interaction");i(this,"version",H);i(this,"moduleName",this.component);i(this,"_spansData",new WeakMap);i(this,"_zonePatched");i(this,"_wrappedListeners",new WeakMap);i(this,"_eventsSpanMap",new WeakMap);i(this,"_eventNames");i(this,"_shouldPreventSpanCreation");var e;this._eventNames=new Set((e=t==null?void 0:t.eventNames)!=null?e:Nt),this._shouldPreventSpanCreation=typeof(t==null?void 0:t.shouldPreventSpanCreation)=="function"?t.shouldPreventSpanCreation:Rt}init(){}_checkForTimeout(t,e){const n=this._spansData.get(e);n&&(t.source==="setTimeout"?n.hrTimeLastTimeout=M():t.source!=="Promise.then"&&t.source!=="setTimeout"&&(n.hrTimeLastTimeout=void 0))}_allowEventName(t){return this._eventNames.has(t)}_createSpan(t,e,n){if(!(t instanceof HTMLElement)||!t.getAttribute||t.hasAttribute("disabled")||!this._allowEventName(e))return;const r=et(t,!0);try{const s=this.tracer.startSpan(e,{attributes:{[v.COMPONENT]:this.component,[v.EVENT_TYPE]:e,[v.TARGET_ELEMENT]:t.tagName,[v.TARGET_XPATH]:r,[v.HTTP_URL]:window.location.href,[v.HTTP_USER_AGENT]:navigator.userAgent}},n?E.setSpan(d.active(),n):void 0);return this._shouldPreventSpanCreation(e,t,s)===!0?void 0:(this._spansData.set(s,{taskCount:0}),s)}catch(s){l.error(this.component,s)}}_decrementTask(t){const e=this._spansData.get(t);e&&(e.taskCount--,e.taskCount===0&&this._tryToEndSpan(t,e.hrTimeLastTimeout))}_getCurrentSpan(t){const e=t.get(yt);return e&&E.getSpan(e)}_incrementTask(t){const e=this._spansData.get(t);e&&e.taskCount++}addPatchedListener(t,e,n,r){let s=this._wrappedListeners.get(n);s||(s=new Map,this._wrappedListeners.set(n,s));let a=s.get(e);return a||(a=new Map,s.set(e,a)),a.has(t)?!1:(a.set(t,r),!0)}removePatchedListener(t,e,n){const r=this._wrappedListeners.get(n);if(!r)return;const s=r.get(e);if(!s)return;const a=s.get(t);return a&&(s.delete(t),s.size===0&&(r.delete(e),r.size===0&&this._wrappedListeners.delete(n))),a}_invokeListener(t,e,n){return typeof t=="function"?t.apply(e,n):t.handleEvent(n[0])}_patchAddEventListener(){const t=this;return e=>function(r,s,a){if(!s)return e.call(this,r,s,a);const p=typeof a=="object"&&a.once,m=function(...u){let f;const _=u[0],W=_==null?void 0:_.target;_&&(f=t._eventsSpanMap.get(_)),p&&t.removePatchedListener(this,r,s);const S=t._createSpan(W,r,f);return S?(_&&t._eventsSpanMap.set(_,S),d.with(E.setSpan(d.active(),S),()=>{const G=t._invokeListener(s,this,u);return S.end(),G})):t._invokeListener(s,this,u)};if(t.addPatchedListener(this,r,s,m))return e.call(this,r,m,a)}}_patchRemoveEventListener(){const t=this;return e=>function(r,s,a){const p=t.removePatchedListener(this,r,s);return p?e.call(this,r,p,a):e.call(this,r,s,a)}}_getPatchableEventTargets(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]}_patchHistoryApi(){this._unpatchHistoryApi(),this._wrap(history,"replaceState",this._patchHistoryMethod()),this._wrap(history,"pushState",this._patchHistoryMethod()),this._wrap(history,"back",this._patchHistoryMethod()),this._wrap(history,"forward",this._patchHistoryMethod()),this._wrap(history,"go",this._patchHistoryMethod())}_patchHistoryMethod(){const t=this;return e=>function(...r){const s=`${location.pathname}${location.hash}${location.search}`,a=e.apply(this,r),p=`${location.pathname}${location.hash}${location.search}`;return s!==p&&t._updateInteractionName(p),a}}_unpatchHistoryApi(){h(history.replaceState)&&this._unwrap(history,"replaceState"),h(history.pushState)&&this._unwrap(history,"pushState"),h(history.back)&&this._unwrap(history,"back"),h(history.forward)&&this._unwrap(history,"forward"),h(history.go)&&this._unwrap(history,"go")}_updateInteractionName(t){const e=E.getSpan(d.active());e&&typeof e.updateName=="function"&&e.updateName(`${Pt} ${t}`)}_patchZoneCancelTask(){const t=this;return e=>function(r){const s=Zone.current,a=t._getCurrentSpan(s);return a&&t._shouldCountTask(r,s)&&t._decrementTask(a),e.call(this,r)}}_patchZoneScheduleTask(){const t=this;return e=>function(r){const s=Zone.current,a=t._getCurrentSpan(s);return a&&t._shouldCountTask(r,s)&&(t._incrementTask(a),t._checkForTimeout(r,a)),e.call(this,r)}}_patchZoneRunTask(){const t=this;return e=>function(r,s,a){const p=Array.isArray(a)&&a[0]instanceof Event?a[0]:void 0,m=p==null?void 0:p.target;let u;const f=this;if(m){if(u=t._createSpan(m,r.eventName),u)return t._incrementTask(u),f.run(()=>{try{return d.with(E.setSpan(d.active(),u),()=>{const _=Zone.current;return r._zone=_,e.call(_,r,s,a)})}finally{t._decrementTask(u)}})}else u=t._getCurrentSpan(f);try{return e.call(f,r,s,a)}finally{u&&t._shouldCountTask(r,f)&&t._decrementTask(u)}}}_shouldCountTask(t,e){if(t._zone&&(e=t._zone),!e||!t.data||t.data.isPeriodic)return!1;const n=this._getCurrentSpan(e);return!n||!this._spansData.get(n)?!1:t.type==="macroTask"||t.type==="microTask"}_tryToEndSpan(t,e){t&&this._spansData.get(t)&&(t.end(e),this._spansData.delete(t))}enable(){const t=this.getZoneWithPrototype();l.debug("applying patch to",this.moduleName,this.version,"zone:",!!t),t?(h(t.prototype.runTask)&&(this._unwrap(t.prototype,"runTask"),l.debug("removing previous patch from method runTask")),h(t.prototype.scheduleTask)&&(this._unwrap(t.prototype,"scheduleTask"),l.debug("removing previous patch from method scheduleTask")),h(t.prototype.cancelTask)&&(this._unwrap(t.prototype,"cancelTask"),l.debug("removing previous patch from method cancelTask")),this._zonePatched=!0,this._wrap(t.prototype,"runTask",this._patchZoneRunTask()),this._wrap(t.prototype,"scheduleTask",this._patchZoneScheduleTask()),this._wrap(t.prototype,"cancelTask",this._patchZoneCancelTask())):(this._zonePatched=!1,this._getPatchableEventTargets().forEach(n=>{h(n.addEventListener)&&(this._unwrap(n,"addEventListener"),l.debug("removing previous patch from method addEventListener")),h(n.removeEventListener)&&(this._unwrap(n,"removeEventListener"),l.debug("removing previous patch from method removeEventListener")),this._wrap(n,"addEventListener",this._patchAddEventListener()),this._wrap(n,"removeEventListener",this._patchRemoveEventListener())})),this._patchHistoryApi()}disable(){const t=this.getZoneWithPrototype();l.debug("removing patch from",this.moduleName,this.version,"zone:",!!t),t&&this._zonePatched?(h(t.prototype.runTask)&&this._unwrap(t.prototype,"runTask"),h(t.prototype.scheduleTask)&&this._unwrap(t.prototype,"scheduleTask"),h(t.prototype.cancelTask)&&this._unwrap(t.prototype,"cancelTask")):this._getPatchableEventTargets().forEach(n=>{h(n.addEventListener)&&this._unwrap(n,"addEventListener"),h(n.removeEventListener)&&this._unwrap(n,"removeEventListener")}),this._unpatchHistoryApi()}getZoneWithPrototype(){return window.Zone}}class bt{static init(){l.setLogger(new nt);const t=new rt;t.addSpanProcessor(new st(new ot)),t.addSpanProcessor(new at(new vt)),t.register();const e=new Et(new ft),n=new mt;n.addLogProcessor(e),n.register();const r=n.getLogEmitter(),s=new ut;s.setAttribute("event.name","click"),r.emit(s),it({instrumentations:[new Lt,new Ot]})}}bt.init();const Ct=F({props:{msg:null},setup(o){const t=ct(0);return(e,n)=>(U(),V(Z,null,[N("h1",null,k(o.msg),1),N("button",{type:"button",onClick:n[0]||(n[0]=r=>t.value++)},"count is: "+k(t.value),1)],64))}});var Dt=j(Ct,[["__scopeId","data-v-08eefdf5"]]);const At=F({setup(o){function t(){window.open("./viewer/","otel-viewer","width=960,height=720")}return(e,n)=>(U(),V(Z,null,[N("div",{class:"viewer-container"},[N("button",{onClick:t},"Open Viewer")]),pt(Dt,{msg:"Hello World"})],64))}});ht(At).mount("#app");
